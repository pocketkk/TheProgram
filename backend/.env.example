# ============================================================================
# The Program - Backend Configuration (SQLite Personal App)
# ============================================================================
# Copy this file to .env and customize with your values
# IMPORTANT: Never commit .env files with real credentials to version control
# ============================================================================

# ----------------------------------------------------------------------------
# Application Settings
# ----------------------------------------------------------------------------
APP_NAME=The Program
APP_ENV=development  # development, staging, production
DEBUG=true
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# ----------------------------------------------------------------------------
# Server Configuration
# ----------------------------------------------------------------------------
HOST=0.0.0.0
PORT=8000
API_V1_STR=/api

# ----------------------------------------------------------------------------
# Database Configuration (SQLite)
# ----------------------------------------------------------------------------
# Path to SQLite database file (will be created if it doesn't exist)
# Relative path: ./data/theprogram.db
# Absolute path: /home/user/.local/share/theprogram/theprogram.db
SQLITE_DB_PATH=./data/theprogram.db

# SQLite Performance & Safety Settings
SQLITE_ENABLE_FOREIGN_KEYS=true      # CRITICAL: Enforce referential integrity
SQLITE_JOURNAL_MODE=WAL              # Write-Ahead Logging for better concurrency
SQLITE_SYNCHRONOUS=NORMAL            # Balance safety vs speed (NORMAL, FULL, OFF)
SQLITE_CACHE_SIZE=-2000              # Cache size: -2000 = 2MB
SQLITE_PAGE_SIZE=4096                # Page size in bytes
SQLITE_TEMP_STORE=MEMORY             # Store temp tables in memory
SQLITE_ECHO=false                    # Log SQL queries (set true for debugging)
SQLITE_AUTO_CREATE_DIR=true          # Auto-create database directory

# Connection Pool Settings
SQLITE_POOL_SIZE=5
SQLITE_MAX_OVERFLOW=10
SQLITE_POOL_PRE_PING=true

# ----------------------------------------------------------------------------
# Security & Authentication
# ----------------------------------------------------------------------------
# CRITICAL: Generate a secure random key for production!
# Generate with: openssl rand -hex 32
SECRET_KEY=your-secret-key-change-this-in-production-use-openssl-rand-hex-32

# JWT Settings
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30       # Access token lifetime
REFRESH_TOKEN_EXPIRE_DAYS=7          # Refresh token lifetime

# Password Protection (Optional)
# Set to false to disable password requirement (single-user trusted device)
REQUIRE_PASSWORD=true

# Password Requirements (when REQUIRE_PASSWORD=true)
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGIT=true
PASSWORD_REQUIRE_SPECIAL=false

# ----------------------------------------------------------------------------
# CORS Settings (Frontend URLs)
# ----------------------------------------------------------------------------
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000
CORS_ALLOW_CREDENTIALS=true

# ----------------------------------------------------------------------------
# Swiss Ephemeris Configuration
# ----------------------------------------------------------------------------
# Path to ephemeris data files (required for astronomical calculations)
# Relative: ./ephemeris
# Absolute: /usr/share/swisseph/ephe
EPHEMERIS_PATH=./ephemeris

# ----------------------------------------------------------------------------
# AI Interpretations (Anthropic Claude)
# ----------------------------------------------------------------------------
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=your-anthropic-api-key-here
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022  # Model to use for interpretations
ANTHROPIC_MAX_TOKENS=4096                     # Max response length

# AI Features
INTERPRETATIONS_ENABLED=true                  # Enable AI-generated interpretations
INTERPRETATIONS_CACHE_TTL=86400              # Cache interpretations for 24 hours

# ----------------------------------------------------------------------------
# GeoNames API (Location & Timezone Lookup)
# ----------------------------------------------------------------------------
# Register for free at: https://www.geonames.org/login
GEONAMES_USERNAME=your_geonames_username
GEONAMES_API_URL=http://api.geonames.org

# ----------------------------------------------------------------------------
# Chart Calculation Defaults
# ----------------------------------------------------------------------------
DEFAULT_HOUSE_SYSTEM=placidus        # placidus, koch, whole_sign, equal
DEFAULT_ZODIAC=tropical              # tropical, sidereal
DEFAULT_AYANAMSA=lahiri              # lahiri, raman, krishnamurti (for Vedic)
DEFAULT_NODE_TYPE=true               # true, mean

# Aspect Orbs (in degrees)
ASPECT_ORB_CONJUNCTION=10
ASPECT_ORB_OPPOSITION=10
ASPECT_ORB_TRINE=8
ASPECT_ORB_SQUARE=7
ASPECT_ORB_SEXTILE=6
ASPECT_ORB_QUINCUNX=3
ASPECT_ORB_SEMISEXTILE=3
ASPECT_ORB_SEMISQUARE=3
ASPECT_ORB_SESQUISQUARE=3
ASPECT_ORB_QUINTILE=2
ASPECT_ORB_BIQUINTILE=2

# ----------------------------------------------------------------------------
# Human Design Settings
# ----------------------------------------------------------------------------
HD_DESIGN_CALCULATION_DAYS=88        # Days before birth for Design calculation

# ----------------------------------------------------------------------------
# File Storage
# ----------------------------------------------------------------------------
STORAGE_TYPE=local                   # local only (no S3 for personal app)
LOCAL_STORAGE_PATH=./storage/reports

# ----------------------------------------------------------------------------
# Pagination Defaults
# ----------------------------------------------------------------------------
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# ----------------------------------------------------------------------------
# Rate Limiting (Optional - for API protection)
# ----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=false             # Disable for single-user app
RATE_LIMIT_CHARTS_PER_HOUR=100
RATE_LIMIT_API_PER_MINUTE=60

# ----------------------------------------------------------------------------
# Performance & Optimization
# ----------------------------------------------------------------------------
ENABLE_GZIP=true
ENABLE_CACHE=false                   # Disable Redis cache for simplicity
CACHE_BACKEND=memory                 # memory only (no Redis needed)

# ----------------------------------------------------------------------------
# API Documentation
# ----------------------------------------------------------------------------
DOCS_URL=/docs                       # Swagger UI
REDOC_URL=/redoc                     # ReDoc UI
OPENAPI_URL=/openapi.json

# ----------------------------------------------------------------------------
# Logging
# ----------------------------------------------------------------------------
LOG_FORMAT=json                      # json, text
LOG_FILE=./logs/app.log

# ----------------------------------------------------------------------------
# Development Tools
# ----------------------------------------------------------------------------
ENABLE_PROFILING=false
ENABLE_SQL_ECHO=false                # Set true to see all SQL queries

# ----------------------------------------------------------------------------
# Error Tracking (Optional - Sentry)
# ----------------------------------------------------------------------------
SENTRY_DSN=                          # Leave empty to disable
SENTRY_ENVIRONMENT=development

# ----------------------------------------------------------------------------
# REMOVED - No longer needed for SQLite personal app
# ----------------------------------------------------------------------------
# DATABASE_URL (replaced by SQLITE_DB_PATH)
# POSTGRES_* (no PostgreSQL)
# REDIS_* (no Redis required)
# SMTP_* (no email required for single-user)
# Multi-user/tenant settings
